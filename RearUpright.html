<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Rear Upright â€¢ Project</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./css/styles.css" />
  <style>
    .project-hero { padding: 32px 0; }
    /* Adjust these two values to control size */
    .slider { position: relative; background: var(--surface); border: 1px solid var(--border); border-radius: 12px; overflow: hidden; max-width: 900px; margin: 0 auto; }
    .slide { display: none; }
    .slide.active { display: block; }
    /* Cap the pre-display height; object-fit contains without cropping */
    .slide img { display: block; width: 100%; height: auto; max-height: 60vh; object-fit: contain; }
    .controls { display: flex; gap: 8px; align-items: center; padding: 10px; justify-content: space-between; }
    .controls-left { display: flex; gap: 8px; align-items: center; }
    .controls button { padding: 8px 12px; border: 1px solid var(--border); background: var(--surface); color: var(--text); border-radius: 8px; }
    .thumbs { display: flex; gap: 8px; padding: 10px; overflow-x: auto; }
    .thumbs img { width: 80px; height: 56px; object-fit: cover; border: 1px solid var(--border); border-radius: 8px; cursor: pointer; opacity: 0.8; }
    .thumbs img.active { outline: 2px solid var(--primary); opacity: 1; }
    /* Lightbox */
    .lightbox { position: fixed; inset: 0; background: rgba(0,0,0,0.8); display: none; align-items: center; justify-content: center; z-index: 100; }
    .lightbox.open { display: flex; }
    .lightbox img { max-width: 90vw; max-height: 90vh; border-radius: 10px; }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <div class="brand">
        <a class="logo" href="./index.html">Cesar Renteria</a>
        <button class="theme-toggle" aria-label="Toggle theme" title="Toggle theme">Theme ðŸŒ‘</button>
      </div>
      <nav class="nav">
        <button class="nav-toggle" aria-label="Toggle navigation">â˜°</button>
        <ul class="nav-list">
          <li><a href="./index.html">Home</a></li>
          <li><a href="./projects.html">Projects</a></li>
          <li><a href="./resume.html">Resume</a></li>
          <li><a href="./contact.html">Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main>
    <section class="project-hero">
      <div class="container">
        <h1>Rear Upright (USC FSAE)</h1>
        <p class="lead">CNCâ€‘machined rear upright prototypeâ€”fixturing, CAM, and verification. Below are selected images; use the controls to play, pause, and navigate.</p>
      </div>
    </section>

    <section class="section">
      <div class="container">
        <div class="slider" aria-label="Project images slideshow">
          <div id="slides"></div>
          <div class="controls">
            <div class="controls-left">
              <button id="prevBtn" aria-label="Previous image">â—€ Prev</button>
              <button id="nextBtn" aria-label="Next image">Next â–¶</button>
              <button id="playPauseBtn" aria-label="Play or pause">Play â–·</button>
            </div>
            <span id="status" class="lead"></span>
          </div>
          <div id="thumbs" class="thumbs" aria-label="Thumbnails"></div>
        </div>

        <div class="section" style="padding-top:24px;">
          <h2>Process & Challenges</h2>
          <p>Brief narrative: CAM strategy in Mastercam, fixture design and validation on HAAS VF2, verification steps, and how issues (tolerance, finish, alignment) were addressed.</p>
        </div>
      </div>
    </section>
  </main>

  <div class="lightbox" id="lightbox" role="dialog" aria-modal="true" aria-label="Image preview">
    <img id="lightboxImg" src="" alt="Preview">
  </div>

  <footer class="site-footer">
    <div class="container">
      <p>Â© <span id="year"></span> Cesar Renteria</p>
    </div>
  </footer>

  <script src="./js/main.js"></script>
  <script>
    // All JPGs for Rear Upright slideshow
    let IMAGES = [
      './images/Rear%20Upright/Rear%201.jpg',
      './images/Rear%20Upright/Rear%202.jpg',
      './images/Rear%20Upright/Rear%203.jpg',
      './images/Rear%20Upright/Rear%204.jpg',
      './images/Rear%20Upright/Rear%205.jpg',
      './images/Rear%20Upright/Rear%206.jpg',
      './images/Rear%20Upright/Rear%207.jpg',
      './images/Rear%20Upright/Rear%208.jpg',
      './images/Rear%20Upright/Rear%209.jpg',
      './images/Rear%20Upright/Rear%2010.jpg',
      './images/Rear%20Upright/Rear%2011.jpg',
      './images/Rear%20Upright/Rear%2012.jpg',
      './images/Rear%20Upright/Rear%2013.jpg',
      './images/Rear%20Upright/Rear%2014.jpg',
      './images/Rear%20Upright/Rear%2015.jpg',
      './images/Rear%20Upright/Rear%2016.jpg',
      './images/Rear%20Upright/Rear%2017.jpg',
      './images/Rear%20Upright/Rear%2019.jpg',
      './images/Rear%20Upright/Rear%2020.jpg',
      './images/Rear%20Upright/Rear%2021.jpg',
      './images/Rear%20Upright/Rear%2022.jpg',
      './images/Rear%20Upright/Rear%2023.jpg',
    ];
    // Reverse order to show newest/highest first (23 -> 1)
    IMAGES = IMAGES.reverse();

    // Build slides and thumbnails dynamically
    const slidesHost = document.getElementById('slides');
    const thumbsHost = document.getElementById('thumbs');
    slidesHost.innerHTML = IMAGES.map((src, i) => `\n      <div class=\"slide${i===0?' active':''}\"><img src=\"${src}\" alt=\"Rear Upright image ${i+1}\"></div>`).join('');
    thumbsHost.innerHTML = IMAGES.map((src, i) => `\n      <img data-idx=\"${i}\" src=\"${src}\" alt=\"Thumb ${i+1}\">`).join('');

    const slides = Array.from(document.querySelectorAll('.slide'));
    const thumbs = Array.from(document.querySelectorAll('#thumbs img'));
    const statusEl = document.getElementById('status');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const playPauseBtn = document.getElementById('playPauseBtn');
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightboxImg');

    let idx = 0;
    let playing = false;
    let timer = null;

    function render() {
      slides.forEach((s, i) => s.classList.toggle('active', i === idx));
      thumbs.forEach((t, i) => t.classList.toggle('active', i === idx));
      statusEl.textContent = `Image ${idx + 1} / ${slides.length}`;
      playPauseBtn.textContent = playing ? 'Pause âšâš' : 'Play â–·';
    }
    function prev(){ idx = (idx - 1 + slides.length) % slides.length; render(); }
    function next(){ idx = (idx + 1) % slides.length; render(); }
    function play(){ if (!playing){ playing = true; timer = setInterval(next, 3000); render(); } }
    function pause(){ playing = false; clearInterval(timer); timer = null; render(); }

    prevBtn.addEventListener('click', () => { pause(); prev(); });
    nextBtn.addEventListener('click', () => { pause(); next(); });
    playPauseBtn.addEventListener('click', () => { playing ? pause() : play(); });

    thumbs.forEach(t => t.addEventListener('click', () => { pause(); idx = Number(t.dataset.idx); render(); }));

    // Click to open lightbox
    slides.forEach(s => {
      const img = s.querySelector('img');
      img.style.cursor = 'zoom-in';
      img.addEventListener('click', () => {
        lightboxImg.src = img.src;
        lightbox.classList.add('open');
      });
    });
    lightbox.addEventListener('click', () => lightbox.classList.remove('open'));
    window.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') lightbox.classList.remove('open');
      if (e.key === 'ArrowLeft') { pause(); prev(); }
      if (e.key === 'ArrowRight') { pause(); next(); }
    });

    // init
    render();
  </script>
</body>
</html>
